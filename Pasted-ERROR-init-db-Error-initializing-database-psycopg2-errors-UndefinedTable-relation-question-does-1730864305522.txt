ERROR:init_db:Error initializing database: (psycopg2.errors.UndefinedTable) relation "question" does not exist
LINE 1: INSERT INTO question (text, question_type, options, required...
                    ^

[SQL: INSERT INTO question (text, question_type, options, required, validation_rules, parent_question_id, parent_answer, "order") SELECT p0::VARCHAR, p1::VARCHAR, p2::JSON, p3::BOOLEAN, p4::JSON, p5::INTEGER, p6::VARCHAR, p7::INTEGER FROM (VALUES (%(text__ ... 876 characters truncated ... 2, p3, p4, p5, p6, p7, sen_counter) ORDER BY sen_counter RETURNING question.id, question.id AS id__1]
[parameters: {'options__0': '[{"title": "a) No support", "description": "", "icon": "check-circle"}, {"title": "b) Ad-hoc involvement", "description": "", "icon": "check-circle"} ... (101 characters truncated) ... ve support", "description": "", "icon": "check-circle"}, {"title": "e) Proactive and integrated support", "description": "", "icon": "check-circle"}]', 'parent_answer__0': 'Driving Innovation and Value Delivery', 'parent_question_id__0': 1, 'order__0': 23, 'text__0': 'How does the security team support innovative cloud projects while managing risks?', 'question_type__0': 'multiple_choice', 'required__0': True, 'validation_rules__0': '{"min_count": 1, "max_count": 1}', 'options__1': '[{"title": "a) Not integrated", "description": "", "icon": "check-circle"}, {"title": "b) Occasionally", "description": "", "icon": "check-circle"},  ... (105 characters truncated) ...  integration", "description": "", "icon": "check-circle"}, {"title": "e) Fully proactive and continuous", "description": "", "icon": "check-circle"}]', 'parent_answer__1': 'Driving Innovation and Value Delivery', 'parent_question_id__1': 1, 'order__1': 24, 'text__1': 'Is proactive risk identification integrated within the application lifecycle?', 'question_type__1': 'multiple_choice', 'required__1': True, 'validation_rules__1': '{"min_count": 1, "max_count": 1}', 'options__2': '[{"title": "a) Not contributing", "description": "", "icon": "check-circle"}, {"title": "b) Slight contribution", "description": "", "icon": "check-c ... (104 characters truncated) ...  High contribution", "description": "", "icon": "check-circle"}, {"title": "e) Significant contribution", "description": "", "icon": "check-circle"}]', 'parent_answer__2': 'Driving Innovation and Value Delivery', 'parent_question_id__2': 1, 'order__2': 25, 'text__2': 'How do cloud security capabilities contribute to enabling new business opportunities?', 'question_type__2': 'multiple_choice', 'required__2': True, 'validation_rules__2': '{"min_count": 1, "max_count": 1}', 'options__3': '[{"title": "a) Not effective", "description": "", "icon": "check-circle"}, {"title": "b) Limited", "description": "", "icon": "check-circle"}, {"titl ... (78 characters truncated) ... itle": "d) Highly effective", "description": "", "icon": "check-circle"}, {"title": "e) Fully effective", "description": "", "icon": "check-circle"}]', 'parent_answer__3': 'Driving Innovation and Value Delivery', 'parent_question_id__3': 1, 'order__3': 26, 'text__3': 'How effective are your current processes for verifying exploit paths in cloud applications?', 'question_type__3': 'multiple_choice', 'required__3': True, 'validation_rules__3': '{"min_count": 1, "max_count": 1}', 'options__4': '[{"title": "a) No collaboration", "description": "", "icon": "check-circle"}, {"title": "b) Limited", "description": "", "icon": "check-circle"}, {"t ... (60 characters truncated) ... le"}, {"title": "d) Strong", "description": "", "icon": "check-circle"}, {"title": "e) Fully integrated", "description": "", "icon": "check-circle"}]', 'parent_answer__4': 'Driving Innovation and Value Delivery', 'parent_question_id__4': 1, 'order__4': 27, 'text__4': 'How well do your security teams work with developers to support secure cloud innovation?', 'question_type__4': 'multiple_choice', 'required__4': True, 'validation_rules__4': '{"min_count": 1, "max_count": 1}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
ERROR:__main__:Error initializing database: (psycopg2.errors.UndefinedTable) relation "question" does not exist
LINE 1: INSERT INTO question (text, question_type, options, required...
                    ^

[SQL: INSERT INTO question (text, question_type, options, required, validation_rules, parent_question_id, parent_answer, "order") SELECT p0::VARCHAR, p1::VARCHAR, p2::JSON, p3::BOOLEAN, p4::JSON, p5::INTEGER, p6::VARCHAR, p7::INTEGER FROM (VALUES (%(text__ ... 876 characters truncated ... 2, p3, p4, p5, p6, p7, sen_counter) ORDER BY sen_counter RETURNING question.id, question.id AS id__1]
[parameters: {'options__0': '[{"title": "a) No support", "description": "", "icon": "check-circle"}, {"title": "b) Ad-hoc involvement", "description": "", "icon": "check-circle"} ... (101 characters truncated) ... ve support", "description": "", "icon": "check-circle"}, {"title": "e) Proactive and integrated support", "description": "", "icon": "check-circle"}]', 'parent_answer__0': 'Driving Innovation and Value Delivery', 'parent_question_id__0': 1, 'order__0': 23, 'text__0': 'How does the security team support innovative cloud projects while managing risks?', 'question_type__0': 'multiple_choice', 'required__0': True, 'validation_rules__0': '{"min_count": 1, "max_count": 1}', 'options__1': '[{"title": "a) Not integrated", "description": "", "icon": "check-circle"}, {"title": "b) Occasionally", "description": "", "icon": "check-circle"},  ... (105 characters truncated) ...  integration", "description": "", "icon": "check-circle"}, {"title": "e) Fully proactive and continuous", "description": "", "icon": "check-circle"}]', 'parent_answer__1': 'Driving Innovation and Value Delivery', 'parent_question_id__1': 1, 'order__1': 24, 'text__1': 'Is proactive risk identification integrated within the application lifecycle?', 'question_type__1': 'multiple_choice', 'required__1': True, 'validation_rules__1': '{"min_count": 1, "max_count": 1}', 'options__2': '[{"title": "a) Not contributing", "description": "", "icon": "check-circle"}, {"title": "b) Slight contribution", "description": "", "icon": "check-c ... (104 characters truncated) ...  High contribution", "description": "", "icon": "check-circle"}, {"title": "e) Significant contribution", "description": "", "icon": "check-circle"}]', 'parent_answer__2': 'Driving Innovation and Value Delivery', 'parent_question_id__2': 1, 'order__2': 25, 'text__2': 'How do cloud security capabilities contribute to enabling new business opportunities?', 'question_type__2': 'multiple_choice', 'required__2': True, 'validation_rules__2': '{"min_count": 1, "max_count": 1}', 'options__3': '[{"title": "a) Not effective", "description": "", "icon": "check-circle"}, {"title": "b) Limited", "description": "", "icon": "check-circle"}, {"titl ... (78 characters truncated) ... itle": "d) Highly effective", "description": "", "icon": "check-circle"}, {"title": "e) Fully effective", "description": "", "icon": "check-circle"}]', 'parent_answer__3': 'Driving Innovation and Value Delivery', 'parent_question_id__3': 1, 'order__3': 26, 'text__3': 'How effective are your current processes for verifying exploit paths in cloud applications?', 'question_type__3': 'multiple_choice', 'required__3': True, 'validation_rules__3': '{"min_count": 1, "max_count": 1}', 'options__4': '[{"title": "a) No collaboration", "description": "", "icon": "check-circle"}, {"title": "b) Limited", "description": "", "icon": "check-circle"}, {"t ... (60 characters truncated) ... le"}, {"title": "d) Strong", "description": "", "icon": "check-circle"}, {"title": "e) Fully integrated", "description": "", "icon": "check-circle"}]', 'parent_answer__4': 'Driving Innovation and Value Delivery', 'parent_question_id__4': 1, 'order__4': 27, 'text__4': 'How well do your security teams work with developers to support secure cloud innovation?', 'question_type__4': 'multiple_choice', 'required__4': True, 'validation_rules__4': '{"min_count": 1, "max_count": 1}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO:init_db:Database initialized successfully!
INFO:app:Initializing app with database URL pattern: postgresql://*****@*****
ERROR:init_db:Error initializing database: (psycopg2.errors.DeadlockDetected) deadlock detected
DETAIL:  Process 1080 waits for AccessExclusiveLock on relation 82249 of database 16389; blocked by process 1079.
Process 1079 waits for AccessExclusiveLock on relation 82248 of database 16389; blocked by process 1080.
HINT:  See server log for query details.

[SQL: DROP SCHEMA IF EXISTS public CASCADE;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR:__main__:Error initializing database: (psycopg2.errors.DeadlockDetected) deadlock detected
DETAIL:  Process 1080 waits for AccessExclusiveLock on relation 82249 of database 16389; blocked by process 1079.
Process 1079 waits for AccessExclusiveLock on relation 82248 of database 16389; blocked by process 1080.
HINT:  See server log for query details.

[SQL: DROP SCHEMA IF EXISTS public CASCADE;]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-11-06 03:37:33.460 Uncaught app exception
Traceback (most recent call last):
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "response" does not exist
LINE 2: FROM response 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/home/runner/S1Cloud/main.py", line 162, in <module>
    main()
  File "/home/runner/S1Cloud/main.py", line 149, in main
    show_questionnaire()
  File "/home/runner/S1Cloud/main.py", line 108, in show_questionnaire
    ).first()
      ^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2728, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/runner/S1Cloud/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "response" does not exist
LINE 2: FROM response 